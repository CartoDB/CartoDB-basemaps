machine:
  environment:
    GIT_DEPLOY_DIR: vignettes
    GIT_DEPLOY_BRANCH: vignettes
    GIT_DEPLOY_USERNAME: vignette
  node:
    version: 0.10.40
dependencies:
  pre:
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - sudo add-apt-repository -y ppa:git-core/ppa
    - sudo apt-get update
    - sudo apt-get install jq libstdc++6 git
  override:
    - npm install js-yaml vignette tilelive-http tilelive-cartodb tilejson tilelive
test:
  override:
    - ./vignette.sh
# general:
#   artifacts:
#     - vignettes
deployment:
  production:
    branch: master
    commands:
      - ./deploy.sh
